

set(CMAKE_POLICY_DEFAULT_CMP0077 NEW)

CMAKE_MINIMUM_REQUIRED(VERSION 3.20)
MESSAGE(STATUS "======================")
MESSAGE(STATUS "Starting usb test")
MESSAGE(STATUS "======================")

SET(LN_ENABLE_USBD True CACHE INTERNAL "")
SET(LN_ENABLE_I2C  FALSE CACHE INTERNAL "")
SET(LN_ENABLE_SPI  FALSE CACHE INTERNAL "")
SET(LN_USB_NB_CDC 1) # 1 CDC interfaces
SET(LN_USB_NB_HID 0) # No HID

SET(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/../..)
INCLUDE(common_CMakeLists)

PROJECT(lnUsb_usbcdc NONE) # the NONE is very important !

enable_language(C CXX ASM) # this is important too!

#

INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR})
INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/INCLUDE)

#SET(LN_ENABLE_RUST ON CACHED "")

ADD_SUBDIRECTORY(${ESPRIT_ROOT})

INCLUDE(${ESPRIT_ROOT}/setup.cmake)
USE_LIBRARY(tinyUsb)

INCLUDE(${ESPRIT_ROOT}/libraries/tinyUsb/tiny.cmake)

GENERATE_GD32_FIRMWARE(hello hello.cpp)

